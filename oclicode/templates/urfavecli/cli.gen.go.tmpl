// Code generated by ocli-codegen DO NOT EDIT.
// Package {{.Opts.GoPackage}} provides primitives to interact with the Open CLI Spec-Compliant CLI.

package {{.Opts.GoPackage}}

import (
  "context"

  urfavecli "github.com/urfave/cli/v3"
  {{- if .Doc.AltSourcesYAML }}
  yamlsrc "github.com/urfave/cli-altsrc/v3/yaml"
  {{- end}}
  {{- if .Doc.AltSourcesJSON }}
  jsonsrc "github.com/urfave/cli-altsrc/v3/json"
  {{- end}}
  {{- if .Doc.AltSourcesTOML }}
  tomlsrc "github.com/urfave/cli-altsrc/v3/toml"
  {{- end}}
)

func New(impl CLIHandlersInterface, version string) *urfavecli.Command {
{{template "cmd.tmpl" .Doc.CommandTrie.Root}}

  {{- if .Doc.Global.Flags}}
  // Add global flags
  {{.Doc.CommandTrie.Root.Command.Name | CamelCase}}Cmd.Flags = []urfavecli.Flag{
  {{- range .Doc.Global.Flags}}
    &urfavecli.{{if eq .Type "string"}}String{{else}}Bool{{end}}{{if .Variadic}}Slice{{end}}Flag{
      Name: "{{.Name | EscapeString}}",
      {{- if .Summary}}
      Usage: "{{.Summary | EscapeString}}",
      {{- else if .Description}}
      Usage: "{{.Description | EscapeString}}",
      {{- end}}
      {{- if .Aliases}}
      Aliases: []string{
      {{- range .Aliases}}
        "{{. | EscapeString}}",
      {{- end}}
      }
      {{- end}}
      Local: false,
    },
  {{- end}}
  }
  {{- end}}

  {{.Doc.CommandTrie.Root.Command.Name | CamelCase}}Cmd.Version = version
  return {{.Doc.CommandTrie.Root.Command.Name | CamelCase}}Cmd
}

{{- range $name, $file := .Doc.Global.ConfigFiles}}

type {{$name | CamelCase}}CfgFile struct {}
func (cfg {{$name | CamelCase}}CfgFile) SourceURI() string {
  return "{{$file.Path | EscapeString}}"
}
{{- end}}
